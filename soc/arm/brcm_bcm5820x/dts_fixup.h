/* SoC level DTS fixup file */

#ifdef DT_CODE_PARTITION_OFFSET
#define CONFIG_FLASH_LOAD_OFFSET	DT_CODE_PARTITION_OFFSET
#endif

#define IRQ_NUM(TYPE, NUM)	(TYPE == 0) ? PPI_IRQ(NUM) : SPI_IRQ(NUM)

#define DT_UART_NS16550_PORT_0_CLK_FREQ	DT_NS16550_44030000_CLOCK_FREQUENCY
#define DT_UART_NS16550_PORT_0_BASE_ADDR	DT_NS16550_44030000_BASE_ADDRESS
#define DT_UART_NS16550_PORT_0_IRQ		\
	IRQ_NUM(DT_NS16550_44030000_IRQ_0_TYPE, DT_NS16550_44030000_IRQ_0)

#define DT_UART_NS16550_PORT_0_NAME			CONFIG_UART_NS16550_PORT_0_NAME
#define DT_UART_NS16550_PORT_0_IRQ_PRI		CONFIG_UART_NS16550_PORT_0_IRQ_PRI
#define DT_UART_NS16550_PORT_0_BAUD_RATE	CONFIG_UART_NS16550_PORT_0_BAUD_RATE
#define DT_UART_NS16550_PORT_0_OPTIONS		CONFIG_UART_NS16550_PORT_0_OPTIONS
#define DT_UART_NS16550_PORT_0_IRQ_FLAGS	UART_IRQ_FLAGS

#define DT_UART_NS16550_PORT_1_CLK_FREQ	DT_NS16550_44020000_CLOCK_FREQUENCY
#define DT_UART_NS16550_PORT_1_BASE_ADDR	DT_NS16550_44020000_BASE_ADDRESS
#define DT_UART_NS16550_PORT_1_IRQ		\
	IRQ_NUM(DT_NS16550_44020000_IRQ_0_TYPE, DT_NS16550_44020000_IRQ_0)

#define DT_UART_NS16550_PORT_2_CLK_FREQ	DT_NS16550_44010000_CLOCK_FREQUENCY
#define DT_UART_NS16550_PORT_2_BASE_ADDR	DT_NS16550_44010000_BASE_ADDRESS
#define DT_UART_NS16550_PORT_2_IRQ		\
	IRQ_NUM(DT_NS16550_44010000_IRQ_0_TYPE, DT_NS16550_44010000_IRQ_0)

#define DT_UART_NS16550_PORT_3_CLK_FREQ	DT_NS16550_44000000_CLOCK_FREQUENCY
#define DT_UART_NS16550_PORT_3_BASE_ADDR	DT_NS16550_44000000_BASE_ADDRESS
#define DT_UART_NS16550_PORT_3_IRQ		\
	IRQ_NUM(DT_NS16550_44000000_IRQ_0_TYPE, DT_NS16550_44000000_IRQ_0)

/* GIC Interrupt controller driver params */
#define GIC_GICD_BASE_ADDR		DT_ARM_GIC_62001000_BASE_ADDRESS_0
#define GIC_GICC_BASE_ADDR		DT_ARM_GIC_62001000_BASE_ADDRESS_1

#define ARM_TIMER_PPI_IRQ		\
	IRQ_NUM(DT_ARM_CORTEXA_TIMER_0_IRQ_0_TYPE, DT_ARM_CORTEXA_TIMER_0_IRQ_0)

#define CONFIG_NUM_IRQS			DT_ARM_GIC_62001000_ARM_NUM_IRQS

#define TIMER0_NAME			"timer0"
#define TIMER1_NAME			"timer1"
#define TIMER2_NAME			"timer2"
#define TIMER3_NAME			"timer3"
#define TIMER4_NAME			"timer4"
#define TIMER5_NAME			"timer5"
#define TIMER6_NAME			"timer6"
#define TIMER7_NAME			"timer7"

/* Watchdog Timer */
#define CONFIG_WDT_DEV_NAME		"wdt"
#define WDT_BASE_ADDR			DT_ARM_SP805_44090000_BASE_ADDRESS
#define WDT_IRQ				DT_ARM_SP805_44090000_IRQ_0

#define CLOCK_CONTROL_NAME		"bcm58201_clocks"
#define A7_CLOCK_CONTROL_NAME		"bcm58201_a7_clock"

#define CONFIG_PINMUX_CITADEL_0_NAME	"citadel_iomux"
#define CITADEL_PINMUX_0_BASE_ADDR	(DT_BRCM_CIT_CHIP_DRU_3001D000_BASE_ADDRESS + 0xd4)
#define CITADEL_PINMUX_71_BASE_ADDR	(DT_BRCM_CIT_CHIP_DRU_3001D000_BASE_ADDRESS + 0x244)

/* SPI controller base addresses */
#define SPI1_BASE			DT_BRCM_CIT_SPI_44080000_BASE_ADDRESS
#define SPI2_BASE			DT_BRCM_CIT_SPI_44070000_BASE_ADDRESS
#define SPI3_BASE			DT_BRCM_CIT_SPI_44060000_BASE_ADDRESS
#define SPI4_BASE			DT_BRCM_CIT_SPI_44050000_BASE_ADDRESS
#define SPI5_BASE			DT_BRCM_CIT_SPI_44040000_BASE_ADDRESS

#define SPI1_IRQ			DT_BRCM_CIT_SPI_44080000_IRQ_0
#define SPI2_IRQ			DT_BRCM_CIT_SPI_44070000_IRQ_0
#define SPI3_IRQ			DT_BRCM_CIT_SPI_44060000_IRQ_0
#define SPI4_IRQ			DT_BRCM_CIT_SPI_44050000_IRQ_0
#define SPI5_IRQ			DT_BRCM_CIT_SPI_44040000_IRQ_0

#define CONFIG_SPI1_DEV_NAME		"spi1"
#define CONFIG_SPI2_DEV_NAME		"spi2"
#define CONFIG_SPI3_DEV_NAME		"spi3"
#define CONFIG_SPI4_DEV_NAME		"spi4"
#define CONFIG_SPI5_DEV_NAME		"spi5"

/* Unicam controller */
#define	CONFIG_UNICAM_DEV_NAME		"unicam"
#define CHIP_INTR__IOSYS_UNICAM_INTERRUPT	DT_BRCM_CIT_UNICAM_56001000_IRQ_0

/* QSPI controller configs and memory maps */
#define CONFIG_PRIMARY_FLASH_DEV_NAME	"qspi_primary_flash"
#define CONFIG_SECONDARY_FLASH_DEV_NAME	"qspi_secondary_flash"

#define BCM58202_BSPI_CS0_START		DT_BRCM_CIT_QSPI_63000000_BASE_ADDRESS
#define BCM58202_BSPI_CS0_SIZE		DT_BRCM_CIT_QSPI_63000000_SIZE
#define BCM58202_BSPI_CS1_START		DT_BRCM_CIT_QSPI_65000000_BASE_ADDRESS
#define BCM58202_BSPI_CS1_SIZE		DT_BRCM_CIT_QSPI_65000000_SIZE
#define BCM58202_WSPI_CS0_START		DT_BRCM_CIT_QSPI_67000000_BASE_ADDRESS
#define BCM58202_WSPI_CS0_SIZE		DT_BRCM_CIT_QSPI_67000000_SIZE
#define BCM58202_WSPI_CS1_START		DT_BRCM_CIT_QSPI_69000000_BASE_ADDRESS
#define BCM58202_WSPI_CS1_SIZE		DT_BRCM_CIT_QSPI_69000000_SIZE

#define CONFIG_DMU_DRU_DEV_NAME		"dru"
#define CONFIG_DMU_CDRU_DEV_NAME	"cdru"
#define CONFIG_DMU_DEV_NAME		"dmu"
#define CRMU_DRU_BASE_ADDR		DT_BRCM_CIT_CRMU_DRU_3001C000_BASE_ADDRESS
#define CDRU_BASE_ADDR			DT_BRCM_CIT_CHIP_DRU_3001D000_BASE_ADDRESS
#define DMU_COMMON_SPACE_BASE_ADDR	BRCM_CIT_DMU_30024000_BASE_ADDRESS

#define CONFIG_GPIO_DEV_NAME_0		"gpio_0"
#define CONFIG_GPIO_DEV_NAME_1		"gpio_1"
#define CONFIG_GPIO_DEV_NAME_2		"gpio_2"
#define GPIO_0_31_BASE_ADDR		DT_BRCM_CIT_GPIO_45030000_BASE_ADDRESS
#define GPIO_32_63_BASE_ADDR		(DT_BRCM_CIT_GPIO_45030000_BASE_ADDRESS + 0x200)
#define GPIO_64_68_BASE_ADDR		(DT_BRCM_CIT_GPIO_45030000_BASE_ADDRESS + 0x400)
#define GPIO_IRQ			DT_BRCM_CIT_GPIO_45030000_IRQ_0

#define CONFIG_GPIO_AON_DEV_NAME        "aon_gpio"
#define GPIO_AON_BASE_ADDR		DT_BRCM_CIT_AON_GPIO_30024800_BASE_ADDRESS
#define GPIO_AON_PIN_CTRL_BASE_ADDR	(DT_BRCM_CIT_DMU_30024000_BASE_ADDRESS + 0x8)

#define CONFIG_GPIO_IOSYS_DEV_NAME	"iosys_gpio"
#define GPIO_IOSYS_BASE_ADDR		DT_BRCM_CIT_IOSYS_GPIO_44098000_BASE_ADDRESS

#define MFIO_PIN_CTRL_BASE_ADDR_0	(DT_BRCM_CIT_CHIP_DRU_3001D000_BASE_ADDRESS + 0x0d4)
#define MFIO_PIN_CTRL_BASE_ADDR_32	(DT_BRCM_CIT_CHIP_DRU_3001D000_BASE_ADDRESS + 0x154)
#define MFIO_PIN_CTRL_BASE_ADDR_37	(DT_BRCM_CIT_CHIP_DRU_3001D000_BASE_ADDRESS + 0x168)

#define I2C0_BASE_ADDR			DT_BRCM_CIT_I2C_30020000_BASE_ADDRESS
#define I2C1_BASE_ADDR			DT_BRCM_CIT_I2C_30020100_BASE_ADDRESS
#define I2C2_BASE_ADDR			DT_BRCM_CIT_I2C_30020200_BASE_ADDRESS

#define CONFIG_I2C0_NAME		"i2c0"
#define CONFIG_I2C1_NAME		"i2c1"
#define CONFIG_I2C2_NAME		"i2c2"

#define CONFIG_DMA_PL080_NAME		"dma_pl080"
#define CONFIG_DMA_DEV_NAME		CONFIG_DMA_PL080_NAME
#define DMA_BASE_ADDR			DT_ARM_PL080_51000000_BASE_ADDRESS
#define DMA_TC0_IRQ			DT_ARM_PL080_51000000_IRQ_0
#define DMA_ERR0_IRQ			DT_ARM_PL080_51000000_IRQ_1
#define DMA_MAX_NUM_CHAN		DT_ARM_PL080_51000000_DMA_CHANNELS

#define CONFIG_PWM_BCM58202_DEV_NAME	"pwm"
#define CONFIG_PWM_ONE_PULSE_BCM58202_DEV_NAME	"pulse_pwm"
#define PWM_BASE_ADDR			DT_BRCM_CIT_PWM_440A0500_BASE_ADDRESS

#define CONFIG_KEYPAD_DEV_NAME		"keypad"
#define CONFIG_KEYPAD_GPIO_DEV_NAME	CONFIG_GPIO_DEV_NAME_0

#define CONFIG_LCD_DEV_NAME		"lcd"

#define	CONFIG_USB2H_DEV_NAME		"usb2h"
#define USBH_EHCI_BASE_ADDR		DT_BRCM_CIT_USB2H_46000000_BASE_ADDRESS
#define USBH_OHCI_BASE_ADDR		(USBH_EHCI_BASE_ADDR + 0x800)
#define USBH_IRQ			DT_BRCM_CIT_USB2H_46000000_IRQ_0

#define PKA_BASE_ADDR			DT_BRCM_CIT_PKA_E0042000_BASE_ADDRESS
#define RNG_BASE_ADDR			DT_BRCM_CIT_RNG_45220000_BASE_ADDRESS
#define SMAU_BASE_ADDR			DT_BRCM_CIT_SMAU_50020400_BASE_ADDRESS
#define CONFIG_SMAU_NAME		"bcm5820x_smau"
#define CONFIG_SMAU_DEV_NAME		CONFIG_SMAU_NAME
#define DPA_BASE_ADDR			DT_BRCM_CIT_DPA_50020830_BASE_ADDRESS

#define SOTP_BASE_ADDR			DT_BRCM_CIT_SOTP_30027000_BASE_ADDRESS
#define OTP_BASE_ADDR			DT_BRCM_CIT_OTPC_3001C800_BASE_ADDRESS

#define CONFIG_SC_BCM58202_DEV_NAME	"smart_card"
#define SCA_SC_BASE_ADDR		DT_BRCM_CIT_SCC_45130000_BASE_ADDRESS

#define CONFIG_UART_CONSOLE_PORT_ADDR          UART_NS16550_PORT_0_BASE_ADDR

#define CONFIG_PM_NAME	"pm"

#define CONFIG_RTC_DEV_NAME			"rtc"
#define CONFIG_BBL_DEV_NAME			"bbl"

#define CONFIG_ADC_NAME			"adc"
#define CONFIG_FT_NAME			"ft"
#define CONFIG_MSR_NAME			"msr"

#define SPRU_BASE_ADDRESS			DT_BRCM_CIT_SPRU_30026000_BASE_ADDRESS

#define RTC_PERIODIC_INTERRUPT			DT_BRCM_CIT_BBL_0_IRQ_0
#define SPRU_ALARM_EVENT_INTERRUPT		DT_BRCM_CIT_BBL_0_IRQ_1
#define BBL_TAMPER_EVENT_INTR			SPRU_ALARM_EVENT_INTERRUPT

#define CONFIG_SPL_DEV_NAME			"spl"
#define CHIP_INTR_SPL_FREQ_INTERRUPT		DT_BRCM_CIT_SPL_30025000_IRQ_0
#define CHIP_INTR_SPL_PVT_INTERRUPT		DT_BRCM_CIT_SPL_30025000_IRQ_1
#define CHIP_INTR_SPL_RST_INTERRUPT		DT_BRCM_CIT_SPL_30025000_IRQ_2
#define CHIP_INTR_SPL_WDOG_INTERRUPT		DT_BRCM_CIT_SPL_30025000_IRQ_3
#define SPL_BASE_ADDR				DT_BRCM_CIT_SPL_30025000_BASE_ADDRESS

#define CONFIG_SMC_DEV_NAME			"smc"
#define SMC_BASE_ADDR				DT_ARM_SMC_PL352_53000000_BASE_ADDRESS

#define CONFIG_PRINTER_DEV_NAME			"printer"

#define BRCM_CIT_GENPLL_3001D000_BASE_ADDRESS_0 DT_BRCM_CIT_CHIP_DRU_3001D000_BASE_ADDRESS
#define BRCM_CIT_AONPLL_3001C020_BASE_ADDRESS_0 (DT_BRCM_CIT_CRMU_DRU_3001C000_BASE_ADDRESS + 0x20)

/* SDIO */
#define SDIO_BASE_ADDR	DT_BRCM_CIT_SDIO_48000000_BASE_ADDRESS
#define SDIO_IRQ	\
	IRQ_NUM(DT_BRCM_CIT_SDIO_48000000_IRQ_0_TYPE, DT_BRCM_CIT_SDIO_48000000_IRQ_0)
#define CONFIG_SDIO_DEV_NAME	"sdio"


/* Definitions for DTS defines generated with Zephyr v1.9.2 */
#define BRCM_CIT_ARMPLL_56010000_BASE_ADDRESS_0	DT_BRCM_CIT_ARMPLL_56010000_BASE_ADDRESS
#define BRCM_CIT_DMU_30024000_BASE_ADDRESS		DT_BRCM_CIT_DMU_30024000_BASE_ADDRESS
#define CONFIG_CDC_ACM_PORT_NAME				CONFIG_CDC_ACM_PORT_NAME_0
#define ARM_SP804_TIMER_45040000_IRQ_0			DT_ARM_SP804_TIMER_45040000_IRQ_0
#define ARM_SP804_TIMER_45040000_BASE_ADDRESS_0	DT_ARM_SP804_TIMER_45040000_BASE_ADDRESS
#define ARM_SP804_TIMER_45040020_IRQ_0			DT_ARM_SP804_TIMER_45040020_IRQ_0
#define ARM_SP804_TIMER_45040020_BASE_ADDRESS_0	DT_ARM_SP804_TIMER_45040020_BASE_ADDRESS
#define ARM_SP804_TIMER_45050000_IRQ_0			DT_ARM_SP804_TIMER_45050000_IRQ_0
#define ARM_SP804_TIMER_45050000_BASE_ADDRESS_0	DT_ARM_SP804_TIMER_45050000_BASE_ADDRESS
#define ARM_SP804_TIMER_45050020_IRQ_0			DT_ARM_SP804_TIMER_45050020_IRQ_0
#define ARM_SP804_TIMER_45050020_BASE_ADDRESS_0	DT_ARM_SP804_TIMER_45050020_BASE_ADDRESS
#define ARM_SP804_TIMER_45140000_IRQ_0			DT_ARM_SP804_TIMER_45140000_IRQ_0
#define ARM_SP804_TIMER_45140000_BASE_ADDRESS_0	DT_ARM_SP804_TIMER_45140000_BASE_ADDRESS
#define ARM_SP804_TIMER_45140020_IRQ_0			DT_ARM_SP804_TIMER_45140020_IRQ_0
#define ARM_SP804_TIMER_45140020_BASE_ADDRESS_0	DT_ARM_SP804_TIMER_45140020_BASE_ADDRESS
#define ARM_SP804_TIMER_45150000_IRQ_0			DT_ARM_SP804_TIMER_45150000_IRQ_0
#define ARM_SP804_TIMER_45150000_BASE_ADDRESS_0	DT_ARM_SP804_TIMER_45150000_BASE_ADDRESS
#define ARM_SP804_TIMER_45150020_IRQ_0			DT_ARM_SP804_TIMER_45150020_IRQ_0
#define ARM_SP804_TIMER_45150020_BASE_ADDRESS_0	DT_ARM_SP804_TIMER_45150020_BASE_ADDRESS
#define BRCM_CIT_USBD_47000000_BASE_ADDRESS		DT_BRCM_CIT_USBD_47000000_BASE_ADDRESS
#define BRCM_CIT_USBD_47000000_IRQ_0			DT_BRCM_CIT_USBD_47000000_IRQ_0
#define UART_NS16550_PORT_0_BASE_ADDR			DT_UART_NS16550_PORT_0_BASE_ADDR

/* FIXME - use a standard init priority from a Kconfig or create one */
#define CONFIG_CLOCK_CONTROL_INIT_PRIORITY	0
#define CONFIG_IOMUX_INIT_PRIORITY		1
#define CONFIG_SOC_CONFIG_PRIORITY		2
#define CONFIG_A7_CLOCK_CONTROL_INIT_PRIORITY	6
#define CONFIG_RTC_INIT_PRIORITY		7
#define CONFIG_BBL_INIT_PRIORITY		8
#define CONFIG_PM_INIT_PRIORITY			9

#define CONFIG_TIMER_INIT_PRIORITY		1
#define CONFIG_DMU_INIT_PRIORITY                2
#define CONFIG_DMA_INIT_PRIORITY		3
#define CONFIG_SMAU_DRIVER_INIT_PRIORITY	4
#define CONFIG_QSPI_DRIVER_INIT_PRIORITY	5
#define CONFIG_GPIO_DRIVER_INIT_PRIORITY        6
#define CONFIG_KEYPAD_DRIVER_INIT_PRIORITY	7
#define CONFIG_ADC_DRIVER_INIT_PRIORITY		8
#define CONFIG_FT_DRIVER_INIT_PRIORITY		9
#define CONFIG_MSR_SWIPE_DRIVER_INIT_PRIORITY	10

#define CONFIG_PWM_DRIVER_INIT_PRIORITY		0
#define CONFIG_SC_INIT_PRIORITY			1
#define CONFIG_SPI_DRIVER_INIT_PRIORITY		2
#define CONFIG_I2C_DRIVER_INIT_PRIORITY         3
#define CONFIG_LCD_DRIVER_INIT_PRIORITY		4
#define CONFIG_SMC_DRIVER_INIT_PRIORITY		5
#define CONFIG_UNICAM_DRIVER_INIT_PRIORITY	6
#define CONFIG_SPL_INIT_PRIORITY		7
#define CONFIG_PRINTER_DRIVER_INIT_PRIORITY	8
#define CONFIG_WDT_DRIVER_INIT_PRIORITY		9
#define CONFIG_USB2H_DRIVER_INIT_PRIORITY	10
#define CONFIG_SDIO_DRIVER_INIT_PRIORITY	11
